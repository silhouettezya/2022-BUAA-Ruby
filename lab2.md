# === 运算符（case equality operator）调研

随后通过查阅资料得知，当比较两个相同类型的对象时，`===` 的用法和 `==` 相同；但是在其他情况下，尤其是比较两个不同类型的对象时，`===`的用法会随着对象类型的不同而不同。

对于上述结果，我起初以为是`===`是对忽略数据类型对语义进行分析，而`==`对考虑数据类型进行分析，然而当我测试下面这个程序的时候发现这个理解并不是正确的。

```ruby
#!/usr/bin/ruby -w
# -*- coding : utf-8 -*-

a = 1
b = 1.0
puts a
puts b
puts 'yes1' if a === b
puts 'yes2' if a == b
```

这个代码运行结果如下

```
1
1.0
yes1
yes2
```

这表明这两个比较均忽略了a是整数类型b是浮点数类型，从语义上进行了比较做出了相等的判断。

于是我就不理解这两个比较到底有什么不同了，从用法来说，也只能查到`===` 运算符被用在case/when语句的底层实现中，这也是它最为常见的用途。

后面我继续查发现`===`有如下特殊用法：

- 在Range中===用于判断等号右边的对象是否包含于等号左边的Range；
- 正则表达式中用于判断一个字符串是否匹配模式，
- Class定义===来判断一个对象是否为类的实例，
- Symbol定义===来判断等号两边的符号对象是否相同

```
(1..10) === 5 #=> true: 5属于range 1..10
/\d+/ === '123'  #=> true: 字符串匹配这个模式
String === 's'   #=> true: "s" 是一个字符串类的实例
:s === 's'    #=> false
```

